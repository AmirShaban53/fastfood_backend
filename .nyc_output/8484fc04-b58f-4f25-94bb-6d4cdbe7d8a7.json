{"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\index.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":24},"end":{"line":8,"column":77}},"3":{"start":{"line":10,"column":15},"end":{"line":10,"column":57}},"4":{"start":{"line":12,"column":14},"end":{"line":12,"column":55}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":51}},"6":{"start":{"line":16,"column":14},"end":{"line":16,"column":71}},"7":{"start":{"line":18,"column":12},"end":{"line":18,"column":63}},"8":{"start":{"line":20,"column":12},"end":{"line":20,"column":63}},"9":{"start":{"line":22,"column":14},"end":{"line":22,"column":67}},"10":{"start":{"line":24,"column":13},"end":{"line":24,"column":65}},"11":{"start":{"line":26,"column":39},"end":{"line":26,"column":93}},"12":{"start":{"line":28,"column":13},"end":{"line":28,"column":37}},"13":{"start":{"line":29,"column":12},"end":{"line":29,"column":35}},"14":{"start":{"line":31,"column":19},"end":{"line":31,"column":64}},"15":{"start":{"line":33,"column":0},"end":{"line":33,"column":95}},"16":{"start":{"line":34,"column":0},"end":{"line":34,"column":33}},"17":{"start":{"line":35,"column":0},"end":{"line":35,"column":30}},"18":{"start":{"line":36,"column":0},"end":{"line":36,"column":56}},"19":{"start":{"line":37,"column":0},"end":{"line":37,"column":32}},"20":{"start":{"line":38,"column":0},"end":{"line":38,"column":32}},"21":{"start":{"line":39,"column":0},"end":{"line":39,"column":36}},"22":{"start":{"line":40,"column":0},"end":{"line":40,"column":34}},"23":{"start":{"line":41,"column":0},"end":{"line":45,"column":3}},"24":{"start":{"line":42,"column":2},"end":{"line":44,"column":5}},"25":{"start":{"line":46,"column":0},"end":{"line":48,"column":3}},"26":{"start":{"line":47,"column":2},"end":{"line":47,"column":70}},"27":{"start":{"line":49,"column":15},"end":{"line":49,"column":18}},"28":{"start":{"line":50,"column":0},"end":{"line":50,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":26,"column":9},"end":{"line":26,"column":31}},"loc":{"start":{"line":26,"column":37},"end":{"line":26,"column":95}},"line":26},"1":{"name":"(anonymous_1)","decl":{"start":{"line":41,"column":8},"end":{"line":41,"column":9}},"loc":{"start":{"line":41,"column":22},"end":{"line":45,"column":1}},"line":41},"2":{"name":"(anonymous_2)","decl":{"start":{"line":46,"column":17},"end":{"line":46,"column":18}},"loc":{"start":{"line":46,"column":23},"end":{"line":48,"column":1}},"line":46}},"branchMap":{"0":{"loc":{"start":{"line":26,"column":46},"end":{"line":26,"column":92}},"type":"cond-expr","locations":[{"start":{"line":26,"column":70},"end":{"line":26,"column":73}},{"start":{"line":26,"column":76},"end":{"line":26,"column":92}}],"line":26},"1":{"loc":{"start":{"line":26,"column":46},"end":{"line":26,"column":67}},"type":"binary-expr","locations":[{"start":{"line":26,"column":46},"end":{"line":26,"column":49}},{"start":{"line":26,"column":53},"end":{"line":26,"column":67}}],"line":26},"2":{"loc":{"start":{"line":28,"column":13},"end":{"line":28,"column":37}},"type":"binary-expr","locations":[{"start":{"line":28,"column":13},"end":{"line":28,"column":29}},{"start":{"line":28,"column":33},"end":{"line":28,"column":37}}],"line":28}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":9,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0,"25":1,"26":1,"27":1,"28":1},"f":{"0":9,"1":0,"2":1},"b":{"0":[5,4],"1":[9,9],"2":[1,1]},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["PORT","process","env","app","swaggerDoc","YAML","load","use","swaggerUi","serve","setup","express","json","static","auth","menu","orders","users","req","res","status","message","listen","logger","info"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA;;AAGA;;AACA;;AACA;;AACA;;;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;AAEA,MAAMG,GAAG,GAAG,uBAAZ;;AAEA,MAAMC,UAAU,GAAGC,gBAAKC,IAAL,CAAU,uBAAV,CAAnB;;AACAH,GAAG,CAACI,GAAJ,CAAQ,OAAR,EAAiBC,0BAAUC,KAA3B,EAAkCD,0BAAUE,KAAV,CAAgBN,UAAhB,CAAlC;AAEAD,GAAG,CAACI,GAAJ,CAAQI,iBAAQC,IAAR,EAAR;AACAT,GAAG,CAACI,GAAJ,CAAQ,oBAAR;AAEAJ,GAAG,CAACI,GAAJ,CAAQ,UAAR,EAAmBI,iBAAQE,MAAR,CAAe,SAAf,CAAnB;AACAV,GAAG,CAACI,GAAJ,CAAQ,OAAR,EAAiBO,aAAjB;AACAX,GAAG,CAACI,GAAJ,CAAQ,OAAR,EAAiBQ,aAAjB;AACAZ,GAAG,CAACI,GAAJ,CAAQ,SAAR,EAAmBS,eAAnB;AACAb,GAAG,CAACI,GAAJ,CAAQ,QAAR,EAAkBU,cAAlB;AAEAd,GAAG,CAACI,GAAJ,CAAQ,CAACW,GAAD,EAAMC,GAAN,KAAY;AAChBA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBR,IAAhB,CAAqB;AAACS,IAAAA,OAAO,EAAE;AAAV,GAArB;AAEH,CAHD;AAMAlB,GAAG,CAACmB,MAAJ,CAAWtB,IAAX,EAAiB,MAAI;AACjBuB,kBAAOC,IAAP,CAAa,uCAAsCxB,IAAK,EAAxD;AACH,CAFD;eAIeG,G","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\","sourcesContent":["import swaggerUi from 'swagger-ui-express';\r\nimport express from 'express';\r\nimport YAML from 'yamljs';\r\nimport cors from 'cors';\r\n\r\nimport logger from './Middleware/logger.js';\r\n\r\n\r\nimport auth from './routes/auth.js';\r\nimport menu from './routes/menu.js';\r\nimport orders from './routes/orders.js';\r\nimport users from './routes/users.js';\r\n\r\nconst PORT = process.env.PORT || 5000;\r\n\r\nconst app = express();\r\n\r\nconst swaggerDoc = YAML.load('./config/swagger.yaml');\r\napp.use('/docs', swaggerUi.serve, swaggerUi.setup(swaggerDoc));\r\n\r\napp.use(express.json());\r\napp.use(cors());\r\n\r\napp.use('/uploads',express.static(\"uploads\"));\r\napp.use('/auth', auth);\r\napp.use('/menu', menu);\r\napp.use('/orders', orders);\r\napp.use('/users', users);\r\n\r\napp.use((req, res)=>{\r\n    res.status(404).json({message: \"route not located\"});\r\n    \r\n});\r\n\r\n\r\napp.listen(PORT, ()=>{\r\n    logger.info(`backend running at http://localhost:${PORT}`);\r\n})\r\n\r\nexport default app;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"9a5135e0cb35a68cbaef149cf3bd26a28ae32456","contentHash":"66396b93962467adeed1cb05243ede98ec47ffa70fb0c061ff9e34ccd3b388fa"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Middleware\\logger.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Middleware\\logger.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":57}},"3":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"4":{"start":{"line":16,"column":4},"end":{"line":16,"column":20}},"5":{"start":{"line":17,"column":15},"end":{"line":25,"column":2}},"6":{"start":{"line":24,"column":31},"end":{"line":24,"column":91}},"7":{"start":{"line":26,"column":15},"end":{"line":26,"column":21}},"8":{"start":{"line":27,"column":0},"end":{"line":27,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":24,"column":20},"end":{"line":24,"column":21}},"loc":{"start":{"line":24,"column":31},"end":{"line":24,"column":91}},"line":24}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":44,"7":1,"8":1},"f":{"0":1,"1":44},"b":{"0":[0,1],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["logger.js"],"names":["createLogger","format","transports","pkg","logger","File","filename","level","Console","combine","timestamp","printf","message"],"mappings":";;;;;;;AAAA;;;;AACA,MAAM;AAAEA,EAAAA,YAAF;AAAgBC,EAAAA,MAAhB;AAAwBC,EAAAA;AAAxB,IAAuCC,gBAA7C;AAEA,MAAMC,MAAM,GAAGJ,YAAY,CAAC;AACxBE,EAAAA,UAAU,EAAE,CACR,IAAIA,UAAU,CAACG,IAAf,CAAoB;AAACC,IAAAA,QAAQ,EAAC,gBAAV;AAA4BC,IAAAA,KAAK,EAAC;AAAlC,GAApB,CADQ,EAER,IAAIL,UAAU,CAACM,OAAf,EAFQ,CADY;AAKxBP,EAAAA,MAAM,EAAEA,MAAM,CAACQ,OAAP,CACJR,MAAM,CAACS,SAAP,CAAiB;AAACT,IAAAA,MAAM,EAAE;AAAT,GAAjB,CADI,EAEJA,MAAM,CAACU,MAAP,CAAcC,OAAO,IAAI,GAAEA,OAAO,CAACL,KAAM,KAAIK,OAAO,CAACF,SAAU,KAAIE,OAAO,CAACA,OAAQ,EAAnF,CAFI;AALgB,CAAD,CAA3B;eAWeR,M","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Middleware\\","sourcesContent":["import pkg from 'winston';\r\nconst { createLogger, format, transports } = pkg;\r\n\r\nconst logger = createLogger({\r\n    transports: [\r\n        new transports.File({filename:'logs/index.log', level:'error'}),\r\n        new transports.Console()\r\n    ],\r\n    format: format.combine(\r\n        format.timestamp({format: 'DD-MM-YYYY HH:mm:ss'}),\r\n        format.printf(message=> `${message.level}: ${message.timestamp}: ${message.message}`)\r\n    )\r\n})\r\n\r\nexport default logger;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e9a8720aecad8f19e5df287d3942a8692c625cbf","contentHash":"8c46d0c4f03198631c58a014455172b2aadaf1e67203ab9ec5c3c1ab65096c8f"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\auth.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\auth.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":33}},"3":{"start":{"line":10,"column":12},"end":{"line":10,"column":68}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":14,"column":15},"end":{"line":14,"column":37}},"6":{"start":{"line":15,"column":0},"end":{"line":15,"column":45}},"7":{"start":{"line":16,"column":0},"end":{"line":16,"column":43}},"8":{"start":{"line":17,"column":15},"end":{"line":17,"column":21}},"9":{"start":{"line":18,"column":0},"end":{"line":18,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1},"f":{"0":1},"b":{"0":[1,0],"1":[1,1]},"inputSourceMap":{"version":3,"sources":["auth.js"],"names":["router","post","auth","signUp","login"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,IAAP,CAAY,SAAZ,EAAuBC,cAAKC,MAA5B;AACAH,MAAM,CAACC,IAAP,CAAY,QAAZ,EAAsBC,cAAKE,KAA3B;eAEeJ,M","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\","sourcesContent":["import { Router } from \"express\";\r\nimport auth from '../Controller/auth.js';\r\n\r\nconst router = Router();\r\n\r\nrouter.post('/signup', auth.signUp);\r\nrouter.post('/login', auth.login);\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"37bc679e6b281ad0e7e32402fda925519bb9c7ec","contentHash":"3b99a9189d7eff89a07401721c2b03e96247ddfcfab3e3bbff89b0f47f241e4c"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\auth.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\auth.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":72}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":42}},"4":{"start":{"line":12,"column":20},"end":{"line":12,"column":67}},"5":{"start":{"line":14,"column":14},"end":{"line":14,"column":55}},"6":{"start":{"line":16,"column":0},"end":{"line":16,"column":28}},"7":{"start":{"line":18,"column":39},"end":{"line":18,"column":93}},"8":{"start":{"line":21,"column":18},"end":{"line":83,"column":3}},"9":{"start":{"line":22,"column":4},"end":{"line":82,"column":5}},"10":{"start":{"line":26,"column":10},"end":{"line":26,"column":18}},"11":{"start":{"line":27,"column":20},"end":{"line":31,"column":8}},"12":{"start":{"line":33,"column":6},"end":{"line":77,"column":7}},"13":{"start":{"line":34,"column":8},"end":{"line":34,"column":58}},"14":{"start":{"line":36,"column":8},"end":{"line":36,"column":60}},"15":{"start":{"line":38,"column":8},"end":{"line":76,"column":11}},"16":{"start":{"line":39,"column":10},"end":{"line":75,"column":11}},"17":{"start":{"line":40,"column":12},"end":{"line":70,"column":13}},"18":{"start":{"line":41,"column":14},"end":{"line":41,"column":75}},"19":{"start":{"line":43,"column":14},"end":{"line":45,"column":17}},"20":{"start":{"line":47,"column":32},"end":{"line":47,"column":61}},"21":{"start":{"line":49,"column":14},"end":{"line":69,"column":15}},"22":{"start":{"line":50,"column":16},"end":{"line":54,"column":19}},"23":{"start":{"line":56,"column":16},"end":{"line":56,"column":67}},"24":{"start":{"line":58,"column":16},"end":{"line":58,"column":74}},"25":{"start":{"line":60,"column":16},"end":{"line":64,"column":19}},"26":{"start":{"line":66,"column":16},"end":{"line":66,"column":66}},"27":{"start":{"line":68,"column":16},"end":{"line":68,"column":73}},"28":{"start":{"line":72,"column":12},"end":{"line":72,"column":66}},"29":{"start":{"line":74,"column":12},"end":{"line":74,"column":40}},"30":{"start":{"line":79,"column":6},"end":{"line":79,"column":60}},"31":{"start":{"line":81,"column":6},"end":{"line":81,"column":34}},"32":{"start":{"line":84,"column":17},"end":{"line":136,"column":3}},"33":{"start":{"line":85,"column":4},"end":{"line":135,"column":5}},"34":{"start":{"line":89,"column":10},"end":{"line":89,"column":18}},"35":{"start":{"line":90,"column":19},"end":{"line":94,"column":8}},"36":{"start":{"line":96,"column":6},"end":{"line":128,"column":7}},"37":{"start":{"line":97,"column":8},"end":{"line":97,"column":68}},"38":{"start":{"line":99,"column":8},"end":{"line":99,"column":51}},"39":{"start":{"line":101,"column":8},"end":{"line":127,"column":11}},"40":{"start":{"line":102,"column":10},"end":{"line":106,"column":11}},"41":{"start":{"line":103,"column":12},"end":{"line":103,"column":66}},"42":{"start":{"line":105,"column":12},"end":{"line":105,"column":55}},"43":{"start":{"line":108,"column":10},"end":{"line":122,"column":11}},"44":{"start":{"line":109,"column":26},"end":{"line":115,"column":14}},"45":{"start":{"line":117,"column":12},"end":{"line":121,"column":15}},"46":{"start":{"line":124,"column":10},"end":{"line":124,"column":66}},"47":{"start":{"line":126,"column":10},"end":{"line":126,"column":46}},"48":{"start":{"line":130,"column":6},"end":{"line":130,"column":57}},"49":{"start":{"line":132,"column":6},"end":{"line":134,"column":9}},"50":{"start":{"line":139,"column":0},"end":{"line":139,"column":23}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":18,"column":9},"end":{"line":18,"column":31}},"loc":{"start":{"line":18,"column":37},"end":{"line":18,"column":95}},"line":18},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":18},"end":{"line":21,"column":19}},"loc":{"start":{"line":21,"column":38},"end":{"line":83,"column":3}},"line":21},"2":{"name":"(anonymous_2)","decl":{"start":{"line":38,"column":43},"end":{"line":38,"column":44}},"loc":{"start":{"line":38,"column":66},"end":{"line":76,"column":9}},"line":38},"3":{"name":"(anonymous_3)","decl":{"start":{"line":84,"column":17},"end":{"line":84,"column":18}},"loc":{"start":{"line":84,"column":37},"end":{"line":136,"column":3}},"line":84},"4":{"name":"(anonymous_4)","decl":{"start":{"line":101,"column":57},"end":{"line":101,"column":58}},"loc":{"start":{"line":101,"column":76},"end":{"line":127,"column":9}},"line":101}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":46},"end":{"line":18,"column":92}},"type":"cond-expr","locations":[{"start":{"line":18,"column":70},"end":{"line":18,"column":73}},{"start":{"line":18,"column":76},"end":{"line":18,"column":92}}],"line":18},"1":{"loc":{"start":{"line":18,"column":46},"end":{"line":18,"column":67}},"type":"binary-expr","locations":[{"start":{"line":18,"column":46},"end":{"line":18,"column":49}},{"start":{"line":18,"column":53},"end":{"line":18,"column":67}}],"line":18},"2":{"loc":{"start":{"line":33,"column":6},"end":{"line":77,"column":7}},"type":"if","locations":[{"start":{"line":33,"column":6},"end":{"line":77,"column":7}},{"start":{"line":33,"column":6},"end":{"line":77,"column":7}}],"line":33},"3":{"loc":{"start":{"line":40,"column":12},"end":{"line":70,"column":13}},"type":"if","locations":[{"start":{"line":40,"column":12},"end":{"line":70,"column":13}},{"start":{"line":40,"column":12},"end":{"line":70,"column":13}}],"line":40},"4":{"loc":{"start":{"line":49,"column":14},"end":{"line":69,"column":15}},"type":"if","locations":[{"start":{"line":49,"column":14},"end":{"line":69,"column":15}},{"start":{"line":49,"column":14},"end":{"line":69,"column":15}}],"line":49},"5":{"loc":{"start":{"line":96,"column":6},"end":{"line":128,"column":7}},"type":"if","locations":[{"start":{"line":96,"column":6},"end":{"line":128,"column":7}},{"start":{"line":96,"column":6},"end":{"line":128,"column":7}}],"line":96},"6":{"loc":{"start":{"line":96,"column":10},"end":{"line":96,"column":43}},"type":"binary-expr","locations":[{"start":{"line":96,"column":10},"end":{"line":96,"column":22}},{"start":{"line":96,"column":26},"end":{"line":96,"column":43}}],"line":96},"7":{"loc":{"start":{"line":102,"column":10},"end":{"line":106,"column":11}},"type":"if","locations":[{"start":{"line":102,"column":10},"end":{"line":106,"column":11}},{"start":{"line":102,"column":10},"end":{"line":106,"column":11}}],"line":102},"8":{"loc":{"start":{"line":108,"column":10},"end":{"line":122,"column":11}},"type":"if","locations":[{"start":{"line":108,"column":10},"end":{"line":122,"column":11}},{"start":{"line":108,"column":10},"end":{"line":122,"column":11}}],"line":108}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":3,"8":1,"9":4,"10":4,"11":4,"12":3,"13":1,"14":1,"15":2,"16":2,"17":2,"18":1,"19":1,"20":1,"21":1,"22":0,"23":0,"24":0,"25":1,"26":1,"27":1,"28":0,"29":0,"30":1,"31":1,"32":1,"33":4,"34":4,"35":4,"36":3,"37":1,"38":1,"39":2,"40":2,"41":0,"42":0,"43":2,"44":1,"45":1,"46":1,"47":1,"48":1,"49":1,"50":1},"f":{"0":3,"1":4,"2":2,"3":4,"4":2},"b":{"0":[1,2],"1":[3,3],"2":[1,2],"3":[1,1],"4":[0,1],"5":[1,2],"6":[3,2],"7":[0,2],"8":[1,1]},"inputSourceMap":{"version":3,"sources":["auth.js"],"names":["Auth","signUp","req","res","email","password","body","users","User","findAll","where","length","logger","info","status","json","bcrypt","hash","error","message","userCount","create","role","login","user","findOne","undefined","compare","result","token","JWT","sign","id","process","env","JWT_KEY","expiresIn"],"mappings":"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","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\","sourcesContent":["import logger from \"../Middleware/logger.js\";\r\nimport {User} from \"../models/index.js\";\r\nimport JWT from 'jsonwebtoken';\r\nimport bcrypt from 'bcrypt';\r\nimport 'dotenv/config.js';\r\n\r\nexport default class Auth{\r\n    \r\n    static signUp = async(req, res)=>{\r\n        try {\r\n            const {email, password} = req.body;\r\n            const users = await User.findAll({where:{email: email}});\r\n            if(users.length >= 1){\r\n                logger.info('user email already exists');\r\n                return res.status(409).json('authenication failed');\r\n            }\r\n            else{\r\n                bcrypt.hash(password, 10, async(error, hash)=>{\r\n                    try {\r\n                        if(error){\r\n                            logger.error('failed to hash user password',error);\r\n                            return res.status(500).json({error: error.message});\r\n                        }\r\n                        else{\r\n                            const userCount = await User.findAll({});\r\n                            if(userCount.length <= 0)\r\n                            {\r\n                                User.create({email: email, password: hash, role: 'admin'});\r\n                                logger.info('admin successfully created');\r\n                                return res.status(201).json('admin successfully created');\r\n                            }\r\n                            else{\r\n                                User.create({email: email, password: hash, role: 'user'});\r\n                                logger.info('user successfully created');\r\n                                return res.status(201).json('user successfully created');\r\n                            }\r\n                        }\r\n                    } \r\n                    catch (error) {\r\n                        logger.error('user creation failed!',error);\r\n                        res.status(500).json(error);\r\n                    }\r\n                });\r\n            }\r\n        } \r\n        catch (error) {\r\n            logger.error('user creation failed!',error);\r\n            res.status(500).json(error);\r\n        }\r\n    }\r\n\r\n\r\n    static login = async(req, res)=>{\r\n        try {\r\n            const {email, password} = req.body;\r\n            const user = await User.findOne({where:{email: email}});\r\n            if(user == null || user == undefined){\r\n                logger.error(`user email: ${email} doesnot exist`);\r\n                return res.status(401).json('auth failed');\r\n            }\r\n            else{\r\n                bcrypt.compare(password, user.password, (error, result)=>{\r\n                    if(error){\r\n                        logger.error('user entered wrong password!');\r\n                        return res.status(401).json('auth failed');\r\n                    }\r\n                    if(result){\r\n                        const token = JWT.sign(\r\n                            {\r\n                                id: user.id,\r\n                                email: user.email,\r\n                                role: user.role\r\n                            },\r\n                            process.env.JWT_KEY,\r\n                            {expiresIn: '1h'}\r\n                        );\r\n                        return res.status(200).json({message: 'authentication successful', token: token, role:user.role});\r\n                    }\r\n                    logger.error('user authentication has failed');\r\n                    res.status(401).json('auth failed');\r\n                })\r\n            }\r\n        } \r\n        catch (error) {\r\n            logger.error('user login failed!',error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"16b95ecc6126864f3ff83e028f9580f5e78766f4","contentHash":"f479d7423281e9332d94ada904ef2683db17c2c04378866ac81e7593269c9114"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\index.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\index.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":11,"column":3}},"2":{"start":{"line":9,"column":4},"end":{"line":9,"column":25}},"3":{"start":{"line":12,"column":0},"end":{"line":17,"column":3}},"4":{"start":{"line":15,"column":4},"end":{"line":15,"column":26}},"5":{"start":{"line":18,"column":0},"end":{"line":23,"column":3}},"6":{"start":{"line":21,"column":4},"end":{"line":21,"column":25}},"7":{"start":{"line":25,"column":12},"end":{"line":25,"column":56}},"8":{"start":{"line":27,"column":13},"end":{"line":27,"column":58}},"9":{"start":{"line":29,"column":12},"end":{"line":29,"column":56}},"10":{"start":{"line":31,"column":39},"end":{"line":31,"column":93}},"11":{"start":{"line":33,"column":0},"end":{"line":33,"column":38}},"12":{"start":{"line":35,"column":0},"end":{"line":35,"column":40}},"13":{"start":{"line":37,"column":0},"end":{"line":37,"column":38}},"14":{"start":{"line":39,"column":0},"end":{"line":39,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":8,"column":7},"end":{"line":8,"column":8}},"loc":{"start":{"line":8,"column":19},"end":{"line":10,"column":3}},"line":8},"1":{"name":"(anonymous_1)","decl":{"start":{"line":14,"column":7},"end":{"line":14,"column":8}},"loc":{"start":{"line":14,"column":19},"end":{"line":16,"column":3}},"line":14},"2":{"name":"(anonymous_2)","decl":{"start":{"line":20,"column":7},"end":{"line":20,"column":8}},"loc":{"start":{"line":20,"column":19},"end":{"line":22,"column":3}},"line":20},"3":{"name":"_interopRequireDefault","decl":{"start":{"line":31,"column":9},"end":{"line":31,"column":31}},"loc":{"start":{"line":31,"column":37},"end":{"line":31,"column":95}},"line":31}},"branchMap":{"0":{"loc":{"start":{"line":31,"column":46},"end":{"line":31,"column":92}},"type":"cond-expr","locations":[{"start":{"line":31,"column":70},"end":{"line":31,"column":73}},{"start":{"line":31,"column":76},"end":{"line":31,"column":92}}],"line":31},"1":{"loc":{"start":{"line":31,"column":46},"end":{"line":31,"column":67}},"type":"binary-expr","locations":[{"start":{"line":31,"column":46},"end":{"line":31,"column":49}},{"start":{"line":31,"column":53},"end":{"line":31,"column":67}}],"line":31}},"s":{"0":1,"1":1,"2":17,"3":1,"4":10,"5":1,"6":13,"7":1,"8":1,"9":1,"10":3,"11":1,"12":1,"13":1,"14":1},"f":{"0":17,"1":10,"2":13,"3":3},"b":{"0":[3,0],"1":[3,3]},"inputSourceMap":{"version":3,"sources":["index.js"],"names":["User","hasMany","Order","belongsTo","Food"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;;;AAEAA,cAAKC,OAAL,CAAaC,cAAb;;AACAA,eAAMC,SAAN,CAAgBH,aAAhB;;AAEAI,cAAKH,OAAL,CAAaC,cAAb;;AACAA,eAAMC,SAAN,CAAgBC,aAAhB","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\","sourcesContent":["import Food from \"./food.js\";\r\nimport Order from \"./order.js\";\r\nimport User from \"./user.js\";\r\n\r\nUser.hasMany(Order);\r\nOrder.belongsTo(User);\r\n\r\nFood.hasMany(Order);\r\nOrder.belongsTo(Food);\r\n\r\nexport {Food, Order, User};"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"3566b4b32f02f286a27f015c9c35d1d85e0b541e","contentHash":"1e32fe92b26367af4f81591dfa9e05f070ac8cb5359a946d0a40d590b3aa2a3f"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\food.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\food.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":10},"end":{"line":8,"column":52}},"3":{"start":{"line":10,"column":17},"end":{"line":10,"column":61}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":14,"column":13},"end":{"line":35,"column":2}},"6":{"start":{"line":37,"column":15},"end":{"line":37,"column":19}},"7":{"start":{"line":38,"column":0},"end":{"line":38,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":1,"6":1,"7":1},"f":{"0":2},"b":{"0":[1,1],"1":[2,2]},"inputSourceMap":{"version":3,"sources":["food.js"],"names":["Food","sequelize","define","id","type","Sequelize","UUID","defaultValue","UUIDV1","primaryKey","allowNull","name","STRING","price","INTEGER","image","timestamps"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,IAAI,GAAGC,YAAUC,MAAV,CAAiB,MAAjB,EAAwB;AACjCC,EAAAA,EAAE,EAAC;AACCC,IAAAA,IAAI,EAAEC,mBAAUC,IADjB;AAECC,IAAAA,YAAY,EAAEF,mBAAUG,MAFzB;AAGCC,IAAAA,UAAU,EAAE,IAHb;AAICC,IAAAA,SAAS,EAAE;AAJZ,GAD8B;AAOjCC,EAAAA,IAAI,EAAC;AACDP,IAAAA,IAAI,EAAEC,mBAAUO,MADf;AAEDF,IAAAA,SAAS,EAAE;AAFV,GAP4B;AAWjCG,EAAAA,KAAK,EAAC;AACFT,IAAAA,IAAI,EAAEC,mBAAUS,OADd;AAEFJ,IAAAA,SAAS,EAAE;AAFT,GAX2B;AAejCK,EAAAA,KAAK,EAAC;AACFX,IAAAA,IAAI,EAAEC,mBAAUO,MADd;AAEFF,IAAAA,SAAS,EAAE;AAFT;AAf2B,CAAxB,EAmBX;AAACM,EAAAA,UAAU,EAAE;AAAb,CAnBW,CAAb;;eAqBehB,I","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\","sourcesContent":["import sequelize from \"./db.js\";\r\nimport Sequelize from 'sequelize';\r\n\r\nconst Food = sequelize.define('food',{\r\n    id:{\r\n        type: Sequelize.UUID,\r\n        defaultValue: Sequelize.UUIDV1,\r\n        primaryKey: true,\r\n        allowNull: false\r\n    },\r\n    name:{\r\n        type: Sequelize.STRING,\r\n        allowNull: false\r\n    },\r\n    price:{\r\n        type: Sequelize.INTEGER,\r\n        allowNull: false\r\n    },\r\n    image:{\r\n        type: Sequelize.STRING,\r\n        allowNull: true\r\n    }\r\n},{timestamps: false});\r\n\r\nexport default Food;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"2cc63168973cb77278731b460fd03c4d06d60cb7","contentHash":"6a867a0837dd5ec3fdbe2f33f9da05790f2387e938bc468ec8e8318aabbacdf8"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\db.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\db.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":72}},"3":{"start":{"line":10,"column":17},"end":{"line":10,"column":61}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":28}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":25},"end":{"line":16,"column":49}},"7":{"start":{"line":17,"column":18},"end":{"line":17,"column":161}},"8":{"start":{"line":18,"column":19},"end":{"line":18,"column":109}},"9":{"start":{"line":19,"column":13},"end":{"line":24,"column":1}},"10":{"start":{"line":25,"column":18},"end":{"line":27,"column":2}},"11":{"start":{"line":29,"column":18},"end":{"line":43,"column":1}},"12":{"start":{"line":30,"column":2},"end":{"line":42,"column":3}},"13":{"start":{"line":31,"column":4},"end":{"line":31,"column":35}},"14":{"start":{"line":33,"column":4},"end":{"line":39,"column":5}},"15":{"start":{"line":34,"column":6},"end":{"line":34,"column":23}},"16":{"start":{"line":36,"column":6},"end":{"line":36,"column":59}},"17":{"start":{"line":38,"column":6},"end":{"line":38,"column":64}},"18":{"start":{"line":41,"column":4},"end":{"line":41,"column":67}},"19":{"start":{"line":45,"column":0},"end":{"line":45,"column":12}},"20":{"start":{"line":46,"column":15},"end":{"line":46,"column":24}},"21":{"start":{"line":47,"column":0},"end":{"line":47,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14},"1":{"name":"(anonymous_1)","decl":{"start":{"line":29,"column":18},"end":{"line":29,"column":19}},"loc":{"start":{"line":29,"column":30},"end":{"line":43,"column":1}},"line":29}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14},"2":{"loc":{"start":{"line":25,"column":41},"end":{"line":25,"column":97}},"type":"cond-expr","locations":[{"start":{"line":25,"column":75},"end":{"line":25,"column":85}},{"start":{"line":25,"column":88},"end":{"line":25,"column":97}}],"line":25},"3":{"loc":{"start":{"line":33,"column":4},"end":{"line":39,"column":5}},"type":"if","locations":[{"start":{"line":33,"column":4},"end":{"line":39,"column":5}},{"start":{"line":33,"column":4},"end":{"line":39,"column":5}}],"line":33}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":1,"18":0,"19":1,"20":1,"21":1},"f":{"0":2,"1":1},"b":{"0":[1,1],"1":[2,2],"2":[1,0],"3":[0,1]},"inputSourceMap":{"version":3,"sources":["db.js"],"names":["productionConfig","process","env","DATABASE_URL","devConfig","PG_USERNAME","PG_PASSWORD","PG_HOST","PG_PORT","PG_DEV_DATABASE","testConfig","pool","max","min","acquire","idle","sequelize","Sequelize","NODE_ENV","connectDB","authenticate","sync","logger","info","error"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,gBAAgB,GAAEC,OAAO,CAACC,GAAR,CAAYC,YAApC;AAEA,MAAMC,SAAS,GAAI,cAAaH,OAAO,CAACC,GAAR,CAAYG,WAAY,IAAGJ,OAAO,CAACC,GAAR,CAAYI,WAAY,IAAGL,OAAO,CAACC,GAAR,CAAYK,OAAQ,IAAGN,OAAO,CAACC,GAAR,CAAYM,OAAQ,IAAGP,OAAO,CAACC,GAAR,CAAYO,eAAgB,EAAhK;AAEA,MAAMC,UAAU,GAAI,cAAaT,OAAO,CAACC,GAAR,CAAYG,WAAY,IAAGJ,OAAO,CAACC,GAAR,CAAYI,WAAY,0BAApF;AAGA,MAAMK,IAAI,GAAG;AACTC,EAAAA,GAAG,EAAE,CADI;AAETC,EAAAA,GAAG,EAAE,CAFI;AAGTC,EAAAA,OAAO,EAAE,IAHA;AAITC,EAAAA,IAAI,EAAE;AAJG,CAAb;AAQA,MAAMC,SAAS,GAAG,IAAIC,kBAAJ,CAAchB,OAAO,CAACC,GAAR,CAAYgB,QAAZ,KAAyB,MAAzB,GAAiCR,UAAjC,GAA8CN,SAA5D,EAAuE;AAACO,EAAAA,IAAI,EAAEA;AAAP,CAAvE,CAAlB;;AAEA,MAAMQ,SAAS,GAAG,YAAW;AACzB,MAAI;AACA,UAAMH,SAAS,CAACI,YAAV,EAAN;;AACA,QAAGnB,OAAO,CAACC,GAAR,CAAYgB,QAAZ,KAAyB,MAA5B,EAAmC;AAC/BF,MAAAA,SAAS,CAACK,IAAV;;AACAC,sBAAOC,IAAP,CAAY,8BAAZ;AACH,KAHD,MAII;AACAD,sBAAOC,IAAP,CAAY,mCAAZ;AACH;AACJ,GATD,CAUA,OAAOC,KAAP,EAAc;AACVF,oBAAOE,KAAP,CAAa,gCAAb,EAA+CA,KAA/C;AAEH;AACJ,CAfD;;AAgBAL,SAAS;eAEMH,S","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\","sourcesContent":["import logger from '../Middleware/logger.js';\r\nimport Sequelize from 'sequelize';\r\nimport 'dotenv/config.js';\r\n\r\nconst productionConfig= process.env.DATABASE_URL;\r\n\r\nconst devConfig = `postgres://${process.env.PG_USERNAME}:${process.env.PG_PASSWORD}@${process.env.PG_HOST}:${process.env.PG_PORT}/${process.env.PG_DEV_DATABASE}`;\r\n\r\nconst testConfig = `postgres://${process.env.PG_USERNAME}:${process.env.PG_PASSWORD}@localhost:5432/postgres`;\r\n    \r\n    \r\nconst pool = {\r\n    max: 5,\r\n    min: 0,\r\n    acquire: 3000,\r\n    idle: 1000\r\n}\r\n\r\n\r\nconst sequelize = new Sequelize(process.env.NODE_ENV === 'test'? testConfig : devConfig, {pool: pool});\r\n\r\nconst connectDB = async() => {\r\n    try {\r\n        await sequelize.authenticate();\r\n        if(process.env.NODE_ENV !== 'test'){\r\n            sequelize.sync();\r\n            logger.info(\"connection to database made!\");\r\n        }\r\n        else{\r\n            logger.info(\"connection to test database made!\");\r\n        }\r\n    } \r\n    catch (error) {\r\n        logger.error(\"connection to database failed!\", error);\r\n        \r\n    }\r\n}\r\nconnectDB();\r\n    \r\nexport default sequelize;\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"42a1f4b968621b376ecc5e61b7c2545d53297a4d","contentHash":"f18e3cba63225923cdd3287c0b5fa3d84e031b14b74076b4b46305dcf60ff40c"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\order.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\order.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":12},"end":{"line":8,"column":56}},"3":{"start":{"line":10,"column":10},"end":{"line":10,"column":52}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":61}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":14},"end":{"line":45,"column":2}},"7":{"start":{"line":47,"column":15},"end":{"line":47,"column":20}},"8":{"start":{"line":48,"column":0},"end":{"line":48,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":1,"7":1,"8":1},"f":{"0":3},"b":{"0":[2,1],"1":[3,3]},"inputSourceMap":{"version":3,"sources":["order.js"],"names":["Order","sequelize","define","id","type","Sequelize","UUID","primaryKey","defaultValue","UUIDV1","allowNull","name","STRING","unit_Price","INTEGER","quantity","price","status","BOOLEAN","timestamps"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,KAAK,GAAGC,YAAUC,MAAV,CAAiB,OAAjB,EAAyB;AACnCC,EAAAA,EAAE,EAAC;AACCC,IAAAA,IAAI,EAAEC,mBAAUC,IADjB;AAECC,IAAAA,UAAU,EAAE,IAFb;AAGCC,IAAAA,YAAY,EAAEH,mBAAUI,MAHzB;AAKCC,IAAAA,SAAS,EAAE;AALZ,GADgC;AAQnCC,EAAAA,IAAI,EAAC;AACDP,IAAAA,IAAI,EAAEC,mBAAUO,MADf;AAEDF,IAAAA,SAAS,EAAE;AAFV,GAR8B;AAYnCG,EAAAA,UAAU,EAAC;AACPT,IAAAA,IAAI,EAAEC,mBAAUS,OADT;AAEPJ,IAAAA,SAAS,EAAE;AAFJ,GAZwB;AAgBnCK,EAAAA,QAAQ,EAAC;AACLX,IAAAA,IAAI,EAAEC,mBAAUS,OADX;AAELJ,IAAAA,SAAS,EAAE;AAFN,GAhB0B;AAoBnCM,EAAAA,KAAK,EAAC;AACFZ,IAAAA,IAAI,EAAEC,mBAAUS,OADd;AAEFJ,IAAAA,SAAS,EAAE;AAFT,GApB6B;AAwBnCO,EAAAA,MAAM,EAAC;AACHb,IAAAA,IAAI,EAAEC,mBAAUa,OADb;AAEHR,IAAAA,SAAS,EAAE;AAFR;AAxB4B,CAAzB,EA6BX;AAACS,EAAAA,UAAU,EAAE;AAAb,CA7BW,CAAd;;eA+BenB,K","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\","sourcesContent":["import User from \"./user.js\";\r\nimport sequelize from \"./db.js\";\r\nimport Sequelize from 'sequelize';\r\n\r\nconst Order = sequelize.define('order',{\r\n    id:{\r\n        type: Sequelize.UUID,\r\n        primaryKey: true,\r\n        defaultValue: Sequelize.UUIDV1,\r\n\r\n        allowNull: false\r\n    },\r\n    name:{\r\n        type: Sequelize.STRING,\r\n        allowNull: false\r\n    },\r\n    unit_Price:{\r\n        type: Sequelize.INTEGER,\r\n        allowNull: false\r\n    },\r\n    quantity:{\r\n        type: Sequelize.INTEGER,\r\n        allowNull: false\r\n    },\r\n    price:{\r\n        type: Sequelize.INTEGER,\r\n        allowNull: false\r\n    },\r\n    status:{\r\n        type: Sequelize.BOOLEAN,\r\n        allowNull: false\r\n    }\r\n\r\n}, {timestamps: false});\r\n\r\nexport default Order;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1807e24f258255c6464f443e721812631f9b0132","contentHash":"f424d5b467b250952f3dff316381a32e17f925069f81dd4970ff9c2a592976eb"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\user.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\user.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":10},"end":{"line":8,"column":52}},"3":{"start":{"line":10,"column":17},"end":{"line":10,"column":61}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":14,"column":13},"end":{"line":35,"column":2}},"6":{"start":{"line":37,"column":15},"end":{"line":37,"column":19}},"7":{"start":{"line":38,"column":0},"end":{"line":38,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12}},"s":{"0":1,"1":1,"2":1,"3":1,"4":2,"5":1,"6":1,"7":1},"f":{"0":2},"b":{"0":[1,1],"1":[2,2]},"inputSourceMap":{"version":3,"sources":["user.js"],"names":["User","sequelize","define","id","type","Sequelize","UUID","primaryKey","defaultValue","UUIDV1","allowNull","email","STRING","password","role","timestamps"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,IAAI,GAAGC,YAAUC,MAAV,CAAiB,MAAjB,EAAwB;AACjCC,EAAAA,EAAE,EAAC;AACCC,IAAAA,IAAI,EAAEC,mBAAUC,IADjB;AAECC,IAAAA,UAAU,EAAE,IAFb;AAGCC,IAAAA,YAAY,EAAEH,mBAAUI,MAHzB;AAICC,IAAAA,SAAS,EAAE;AAJZ,GAD8B;AAOjCC,EAAAA,KAAK,EAAC;AACFP,IAAAA,IAAI,EAAEC,mBAAUO,MADd;AAEFF,IAAAA,SAAS,EAAE;AAFT,GAP2B;AAWjCG,EAAAA,QAAQ,EAAC;AACLT,IAAAA,IAAI,EAAEC,mBAAUO,MADX;AAELF,IAAAA,SAAS,EAAE;AAFN,GAXwB;AAejCI,EAAAA,IAAI,EAAC;AACDV,IAAAA,IAAI,EAAEC,mBAAUO,MADf;AAEDF,IAAAA,SAAS,EAAE;AAFV;AAf4B,CAAxB,EAmBV;AAACK,EAAAA,UAAU,EAAE;AAAb,CAnBU,CAAb;;eAsBef,I","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\models\\","sourcesContent":["import sequelize from \"./db.js\";\r\nimport Sequelize from 'sequelize';\r\n\r\nconst User = sequelize.define('user',{\r\n    id:{\r\n        type: Sequelize.UUID,\r\n        primaryKey: true,\r\n        defaultValue: Sequelize.UUIDV1,\r\n        allowNull: false\r\n    },\r\n    email:{\r\n        type: Sequelize.STRING,\r\n        allowNull: false\r\n    },\r\n    password:{\r\n        type: Sequelize.STRING,\r\n        allowNull: false\r\n    },\r\n    role:{\r\n        type: Sequelize.STRING,\r\n        allowNull: true\r\n    }\r\n}, {timestamps: false});\r\n\r\n\r\nexport default User;\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7c6f8d195a08bdaae05ab1a2935066dfd5202420","contentHash":"518aa89790ae2e605ccba8f532aeba1e804c8f7d641ed0828e3eef8eb10e5286"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\menu.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\menu.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":33}},"3":{"start":{"line":10,"column":17},"end":{"line":10,"column":78}},"4":{"start":{"line":12,"column":19},"end":{"line":12,"column":82}},"5":{"start":{"line":14,"column":12},"end":{"line":14,"column":68}},"6":{"start":{"line":16,"column":39},"end":{"line":16,"column":93}},"7":{"start":{"line":18,"column":15},"end":{"line":18,"column":37}},"8":{"start":{"line":19,"column":0},"end":{"line":19,"column":43}},"9":{"start":{"line":20,"column":0},"end":{"line":20,"column":114}},"10":{"start":{"line":21,"column":0},"end":{"line":21,"column":81}},"11":{"start":{"line":22,"column":0},"end":{"line":22,"column":84}},"12":{"start":{"line":23,"column":15},"end":{"line":23,"column":21}},"13":{"start":{"line":24,"column":0},"end":{"line":24,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":16,"column":9},"end":{"line":16,"column":31}},"loc":{"start":{"line":16,"column":37},"end":{"line":16,"column":95}},"line":16}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":92}},"type":"cond-expr","locations":[{"start":{"line":16,"column":70},"end":{"line":16,"column":73}},{"start":{"line":16,"column":76},"end":{"line":16,"column":92}}],"line":16},"1":{"loc":{"start":{"line":16,"column":46},"end":{"line":16,"column":67}},"type":"binary-expr","locations":[{"start":{"line":16,"column":46},"end":{"line":16,"column":49}},{"start":{"line":16,"column":53},"end":{"line":16,"column":67}}],"line":16}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1},"f":{"0":3},"b":{"0":[3,0],"1":[3,3]},"inputSourceMap":{"version":3,"sources":["menu.js"],"names":["router","get","menu","getFoodList","post","imageUpload","single","addFood","patch","editFood","delete","deleteFood"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAGA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgBC,cAAKC,WAArB;AACAH,MAAM,CAACI,IAAP,CAAY,GAAZ,EAAiB,wBAAU,CAAC,OAAD,CAAV,CAAjB,EAAuCC,qBAAYC,MAAZ,CAAmB,OAAnB,CAAvC,EAAoEJ,cAAKK,OAAzE;AACAP,MAAM,CAACQ,KAAP,CAAa,MAAb,EAAqB,wBAAU,CAAC,OAAD,CAAV,CAArB,EAA2CN,cAAKO,QAAhD;AACAT,MAAM,CAACU,MAAP,CAAc,MAAd,EAAsB,wBAAU,CAAC,OAAD,CAAV,CAAtB,EAA4CR,cAAKS,UAAjD;eAEeX,M","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\","sourcesContent":["import { Router } from \"express\";\r\nimport checkAuth from \"../Middleware/checkAuth.js\";\r\nimport imageUpload from \"../Middleware/imageUpload.js\";\r\nimport menu from '../Controller/menu.js';\r\n\r\n\r\nconst router = Router();\r\n\r\nrouter.get('/', menu.getFoodList);\r\nrouter.post('/', checkAuth([\"admin\"]), imageUpload.single('image'), menu.addFood);\r\nrouter.patch('/:id', checkAuth([\"admin\"]), menu.editFood);\r\nrouter.delete('/:id', checkAuth([\"admin\"]), menu.deleteFood);\r\n\r\nexport default router;\r\n\r\n\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"15538fabf7d9ebd35afc48e236152246f8f04d3b","contentHash":"6d0ee614eefc11111fd3a56af0e704593dc3200e3a53adcf31551d5799b4473a"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Middleware\\checkAuth.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Middleware\\checkAuth.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":20},"end":{"line":8,"column":67}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":60}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":28}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":18},"end":{"line":44,"column":1}},"7":{"start":{"line":17,"column":2},"end":{"line":43,"column":4}},"8":{"start":{"line":18,"column":4},"end":{"line":42,"column":5}},"9":{"start":{"line":19,"column":20},"end":{"line":19,"column":59}},"10":{"start":{"line":21,"column":22},"end":{"line":21,"column":78}},"11":{"start":{"line":23,"column":6},"end":{"line":23,"column":29}},"12":{"start":{"line":25,"column":6},"end":{"line":35,"column":7}},"13":{"start":{"line":26,"column":8},"end":{"line":26,"column":69}},"14":{"start":{"line":28,"column":8},"end":{"line":28,"column":15}},"15":{"start":{"line":30,"column":8},"end":{"line":30,"column":49}},"16":{"start":{"line":32,"column":8},"end":{"line":34,"column":11}},"17":{"start":{"line":37,"column":6},"end":{"line":37,"column":55}},"18":{"start":{"line":39,"column":6},"end":{"line":41,"column":9}},"19":{"start":{"line":46,"column":15},"end":{"line":46,"column":24}},"20":{"start":{"line":47,"column":0},"end":{"line":47,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14},"1":{"name":"(anonymous_1)","decl":{"start":{"line":16,"column":18},"end":{"line":16,"column":19}},"loc":{"start":{"line":16,"column":26},"end":{"line":44,"column":1}},"line":16},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":9},"end":{"line":17,"column":10}},"loc":{"start":{"line":17,"column":29},"end":{"line":43,"column":3}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14},"2":{"loc":{"start":{"line":25,"column":6},"end":{"line":35,"column":7}},"type":"if","locations":[{"start":{"line":25,"column":6},"end":{"line":35,"column":7}},{"start":{"line":25,"column":6},"end":{"line":35,"column":7}}],"line":25}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":8,"8":17,"9":17,"10":17,"11":17,"12":17,"13":17,"14":17,"15":0,"16":0,"17":0,"18":0,"19":1,"20":1},"f":{"0":2,"1":8,"2":17},"b":{"0":[1,1],"1":[2,2],"2":[17,0]},"inputSourceMap":{"version":3,"sources":["checkAuth.js"],"names":["checkAuth","role","req","res","next","token","headers","authorization","split","payload","jwt","verify","process","env","JWT_KEY","userData","includes","logger","info","error","status","json","message"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,SAAS,GAAGC,IAAD,IAAU;AACvB,SAAO,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AACvB,QAAI;AACA,YAAMC,KAAK,GAAGH,GAAG,CAACI,OAAJ,CAAYC,aAAZ,CAA0BC,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,CAAd;;AACA,YAAMC,OAAO,GAAGC,sBAAIC,MAAJ,CAAWN,KAAX,EAAkBO,OAAO,CAACC,GAAR,CAAYC,OAA9B,CAAhB;;AACAZ,MAAAA,GAAG,CAACa,QAAJ,GAAeN,OAAf;;AACA,UAAGR,IAAI,CAACe,QAAL,CAAcP,OAAO,CAACR,IAAtB,CAAH,EAA+B;AAC3BgB,wBAAOC,IAAP,CAAa,aAAYT,OAAO,CAACR,IAAK,aAAtC;;AACAG,QAAAA,IAAI;AACP,OAHD,MAII;AACAa,wBAAOE,KAAP,CAAa,iBAAb;;AACA,eAAOhB,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,UAAAA,OAAO,EAAC;AAAT,SAArB,CAAP;AACH;AAEJ,KAbD,CAcA,OAAOH,KAAP,EAAc;AACVF,sBAAOE,KAAP,CAAa,kBAAb,EAAiCA,KAAjC;;AACI,aAAOhB,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACC,QAAAA,OAAO,EAAC;AAAT,OAArB,CAAP;AACP;AACJ,GAnBD;AAoBH,CArBD;;eAuBetB,S","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Middleware\\","sourcesContent":["import  jwt  from \"jsonwebtoken\";\r\nimport logger from \"./logger.js\";\r\nimport 'dotenv/config.js';\r\n\r\nconst checkAuth= (role) => {\r\n    return (req, res, next) => {\r\n        try {\r\n            const token = req.headers.authorization.split(\" \")[1];\r\n            const payload = jwt.verify(token, process.env.JWT_KEY);\r\n            req.userData = payload;\r\n            if(role.includes(payload.role)){\r\n                logger.info(`the role: ${payload.role} was found!`);\r\n                next(); \r\n            }\r\n            else{ \r\n                logger.error('role not found!');\r\n                return res.status(401).json({message:\"auth failed\"});\r\n            }\r\n            \r\n        } \r\n        catch (error) {\r\n            logger.error('token not found!', error);\r\n                return res.status(401).json({message:\"auth failed\"});\r\n        }\r\n    }\r\n}\r\n\r\nexport default checkAuth;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a89351a5ea653c283368707244a4839cc9560af0","contentHash":"f122e8bbf4f7d943e174ac3437adb10844f27a20534b2b3a1dada72b233a3c42"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Middleware\\imageUpload.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Middleware\\imageUpload.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":55}},"3":{"start":{"line":10,"column":39},"end":{"line":10,"column":93}},"4":{"start":{"line":12,"column":16},"end":{"line":19,"column":2}},"5":{"start":{"line":14,"column":4},"end":{"line":14,"column":27}},"6":{"start":{"line":17,"column":4},"end":{"line":17,"column":39}},"7":{"start":{"line":21,"column":19},"end":{"line":27,"column":1}},"8":{"start":{"line":22,"column":2},"end":{"line":26,"column":3}},"9":{"start":{"line":23,"column":4},"end":{"line":23,"column":20}},"10":{"start":{"line":25,"column":4},"end":{"line":25,"column":19}},"11":{"start":{"line":29,"column":20},"end":{"line":35,"column":2}},"12":{"start":{"line":36,"column":15},"end":{"line":36,"column":26}},"13":{"start":{"line":37,"column":0},"end":{"line":37,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":10,"column":9},"end":{"line":10,"column":31}},"loc":{"start":{"line":10,"column":37},"end":{"line":10,"column":95}},"line":10},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":15},"end":{"line":13,"column":16}},"loc":{"start":{"line":13,"column":34},"end":{"line":15,"column":3}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":12},"end":{"line":16,"column":13}},"loc":{"start":{"line":16,"column":31},"end":{"line":18,"column":3}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":19},"end":{"line":21,"column":20}},"loc":{"start":{"line":21,"column":38},"end":{"line":27,"column":1}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":92}},"type":"cond-expr","locations":[{"start":{"line":10,"column":70},"end":{"line":10,"column":73}},{"start":{"line":10,"column":76},"end":{"line":10,"column":92}}],"line":10},"1":{"loc":{"start":{"line":10,"column":46},"end":{"line":10,"column":67}},"type":"binary-expr","locations":[{"start":{"line":10,"column":46},"end":{"line":10,"column":49}},{"start":{"line":10,"column":53},"end":{"line":10,"column":67}}],"line":10},"2":{"loc":{"start":{"line":22,"column":2},"end":{"line":26,"column":3}},"type":"if","locations":[{"start":{"line":22,"column":2},"end":{"line":26,"column":3}},{"start":{"line":22,"column":2},"end":{"line":26,"column":3}}],"line":22},"3":{"loc":{"start":{"line":22,"column":6},"end":{"line":22,"column":68}},"type":"binary-expr","locations":[{"start":{"line":22,"column":6},"end":{"line":22,"column":35}},{"start":{"line":22,"column":39},"end":{"line":22,"column":68}}],"line":22}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":0,"10":1,"11":1,"12":1,"13":1},"f":{"0":1,"1":1,"2":1,"3":1},"b":{"0":[0,1],"1":[1,1],"2":[0,1],"3":[1,1]},"inputSourceMap":{"version":3,"sources":["imageUpload.js"],"names":["storage","multer","diskStorage","destination","req","file","cb","filename","body","name","fileFilter","mimetype","imageUpload","limits","fileSize"],"mappings":";;;;;;;AAAA;;;;AAEA,MAAMA,OAAO,GAAGC,gBAAOC,WAAP,CAAmB;AAC/BC,EAAAA,WAAW,EAAE,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAACA,IAAAA,EAAE,CAAC,IAAD,EAAO,YAAP,CAAF;AAAuB,GADzB;AAE/BC,EAAAA,QAAQ,EAAE,CAACH,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAACA,IAAAA,EAAE,CAAC,IAAD,EAAQ,GAAEF,GAAG,CAACI,IAAJ,CAASC,IAAK,QAAxB,CAAF;AAAmC;AAFlC,CAAnB,CAAhB;;AAKA,MAAMC,UAAU,GAAG,CAACN,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAClC,MAAGD,IAAI,CAACM,QAAL,KAAkB,WAAlB,IAAiCN,IAAI,CAACM,QAAL,KAAkB,WAAtD,EACA;AACIL,IAAAA,EAAE,CAAC,IAAD,EAAO,KAAP,CAAF;AACH,GAHD,MAII;AACAA,IAAAA,EAAE,CAAC,IAAD,EAAO,IAAP,CAAF;AAEH;AACJ,CATD;;AAWA,MAAMM,WAAW,GAAG,qBAAO;AACvBZ,EAAAA,OAAO,EAAEA,OADc;AAEvBa,EAAAA,MAAM,EAAC;AACFC,IAAAA,QAAQ,EAAE,OAAO,IAAP,GAAa;AADrB,GAFgB;AAKvBJ,EAAAA,UAAU,EAAEA;AALW,CAAP,CAApB;eAQeE,W","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Middleware\\","sourcesContent":["import multer from 'multer';\r\n\r\nconst storage = multer.diskStorage({\r\n    destination: (req, file, cb) => {cb(null, './uploads/')},\r\n    filename: (req, file, cb) => {cb(null, `${req.body.name}_image`)}\r\n});\r\n\r\nconst fileFilter = (req, file, cb) => {\r\n    if(file.mimetype === 'image/jpg' || file.mimetype === 'image/png')\r\n    {\r\n        cb(null, false);\r\n    }\r\n    else{\r\n        cb(null, true);\r\n\r\n    }\r\n}\r\n\r\nconst imageUpload = multer({\r\n    storage: storage,\r\n    limits:{\r\n         fileSize: 1024 * 1024 *5\r\n    },\r\n    fileFilter: fileFilter\r\n});\r\n\r\nexport default imageUpload;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"35c465cddd3755330e68cb2b5ca2c18487f41034","contentHash":"93b30578ded52028d2172978fcad834698919af9d591eb76051777968a0fef3c"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\menu.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\menu.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":72}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":42}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":15,"column":23},"end":{"line":29,"column":3}},"6":{"start":{"line":16,"column":4},"end":{"line":28,"column":5}},"7":{"start":{"line":17,"column":23},"end":{"line":17,"column":52}},"8":{"start":{"line":19,"column":6},"end":{"line":19,"column":53}},"9":{"start":{"line":21,"column":6},"end":{"line":21,"column":37}},"10":{"start":{"line":23,"column":6},"end":{"line":23,"column":59}},"11":{"start":{"line":25,"column":6},"end":{"line":27,"column":9}},"12":{"start":{"line":30,"column":19},"end":{"line":52,"column":3}},"13":{"start":{"line":31,"column":4},"end":{"line":51,"column":5}},"14":{"start":{"line":35,"column":10},"end":{"line":35,"column":18}},"15":{"start":{"line":36,"column":6},"end":{"line":40,"column":9}},"16":{"start":{"line":42,"column":6},"end":{"line":42,"column":47}},"17":{"start":{"line":44,"column":6},"end":{"line":44,"column":47}},"18":{"start":{"line":46,"column":6},"end":{"line":46,"column":64}},"19":{"start":{"line":48,"column":6},"end":{"line":50,"column":9}},"20":{"start":{"line":53,"column":20},"end":{"line":80,"column":3}},"21":{"start":{"line":54,"column":4},"end":{"line":79,"column":5}},"22":{"start":{"line":58,"column":10},"end":{"line":58,"column":18}},"23":{"start":{"line":59,"column":19},"end":{"line":63,"column":7}},"24":{"start":{"line":64,"column":6},"end":{"line":68,"column":9}},"25":{"start":{"line":70,"column":6},"end":{"line":70,"column":52}},"26":{"start":{"line":72,"column":6},"end":{"line":72,"column":53}},"27":{"start":{"line":74,"column":6},"end":{"line":74,"column":60}},"28":{"start":{"line":76,"column":6},"end":{"line":78,"column":9}},"29":{"start":{"line":81,"column":22},"end":{"line":114,"column":3}},"30":{"start":{"line":82,"column":4},"end":{"line":113,"column":5}},"31":{"start":{"line":83,"column":17},"end":{"line":83,"column":30}},"32":{"start":{"line":84,"column":19},"end":{"line":88,"column":8}},"33":{"start":{"line":90,"column":6},"end":{"line":96,"column":7}},"34":{"start":{"line":91,"column":8},"end":{"line":91,"column":71}},"35":{"start":{"line":93,"column":8},"end":{"line":95,"column":11}},"36":{"start":{"line":98,"column":6},"end":{"line":102,"column":9}},"37":{"start":{"line":104,"column":6},"end":{"line":104,"column":52}},"38":{"start":{"line":106,"column":6},"end":{"line":106,"column":59}},"39":{"start":{"line":108,"column":6},"end":{"line":108,"column":60}},"40":{"start":{"line":110,"column":6},"end":{"line":112,"column":9}},"41":{"start":{"line":117,"column":0},"end":{"line":117,"column":23}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":23},"end":{"line":15,"column":24}},"loc":{"start":{"line":15,"column":43},"end":{"line":29,"column":3}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":30,"column":19},"end":{"line":30,"column":20}},"loc":{"start":{"line":30,"column":39},"end":{"line":52,"column":3}},"line":30},"3":{"name":"(anonymous_3)","decl":{"start":{"line":53,"column":20},"end":{"line":53,"column":21}},"loc":{"start":{"line":53,"column":40},"end":{"line":80,"column":3}},"line":53},"4":{"name":"(anonymous_4)","decl":{"start":{"line":81,"column":22},"end":{"line":81,"column":23}},"loc":{"start":{"line":81,"column":42},"end":{"line":114,"column":3}},"line":81}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12},"2":{"loc":{"start":{"line":90,"column":6},"end":{"line":96,"column":7}},"type":"if","locations":[{"start":{"line":90,"column":6},"end":{"line":96,"column":7}},{"start":{"line":90,"column":6},"end":{"line":96,"column":7}}],"line":90},"3":{"loc":{"start":{"line":90,"column":10},"end":{"line":90,"column":43}},"type":"binary-expr","locations":[{"start":{"line":90,"column":10},"end":{"line":90,"column":22}},{"start":{"line":90,"column":26},"end":{"line":90,"column":43}}],"line":90}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":1,"13":4,"14":4,"15":4,"16":1,"17":1,"18":3,"19":3,"20":1,"21":2,"22":2,"23":2,"24":2,"25":1,"26":1,"27":1,"28":1,"29":1,"30":2,"31":2,"32":2,"33":1,"34":0,"35":0,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1},"f":{"0":1,"1":1,"2":4,"3":2,"4":2},"b":{"0":[1,0],"1":[1,1],"2":[0,1],"3":[1,1]},"inputSourceMap":{"version":3,"sources":["menu.js"],"names":["Menu","getFoodList","req","res","foodList","Food","findAll","logger","info","status","json","error","message","addFood","name","price","body","create","image","file","path","editFood","data","id","params","update","where","deleteFood","food","findOne","undefined","destroy"],"mappings":"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","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\","sourcesContent":["import logger from \"../Middleware/logger.js\";\r\nimport {Food} from '../models/index.js';\r\n\r\n\r\nexport default class Menu{\r\n\r\n    static getFoodList = async(req, res) =>{\r\n        try {\r\n            const foodList = await Food.findAll({});\r\n            logger.info('list of all food items');\r\n            res.status(200).json(foodList);\r\n        } \r\n        catch (error) {\r\n            logger.error(\"server error ocurred\",error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n\r\n    static addFood = async(req, res) =>{\r\n        try {\r\n            const {name, price} = req.body;\r\n            await Food.create({name: name, price:price , image: req.file.path});\r\n            logger.info('new food created');\r\n            res.status(201).json(\"new food created\");\r\n        } \r\n        catch (error) {\r\n            logger.error(\"failed to create new food\",error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n\r\n    static editFood = async(req, res) =>{\r\n        try {\r\n            const {name, price} = req.body;\r\n            const data = {name: name, price: price, id:req.params.id};\r\n            await Food.update(data, {where:{id: data.id}})\r\n            logger.info('food has been updated');\r\n            res.status(200).json(\"food has been updated!\");\r\n        } \r\n        catch (error) {\r\n            logger.error(\"failed to update food\",error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n\r\n    static deleteFood = async(req, res) =>{\r\n        try {\r\n            const id = req.params.id;\r\n            const food = await Food.findOne({where:{id: id}});\r\n            if(food == null || food == undefined)\r\n            {\r\n                logger.error(`food of ID:${id} doesnot exist`,error);\r\n                return res.status(500).json({error: 'could not delete food'});\r\n            }\r\n            \r\n            await Food.destroy({where: {id: id}});\r\n            logger.info('food has been deleted');\r\n            return res.status(200).json(\"food has been deleted\");\r\n            \r\n        } \r\n        catch (error) {\r\n            logger.error(\"failed to delete food\",error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"586db087da6357f51eac0ecbf0c36cd84dc7fc2e","contentHash":"3640d9fdbd63e238f6b3cec9976b893738eb60781285826e4063de97a77a87db"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\orders.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\orders.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":33}},"3":{"start":{"line":10,"column":14},"end":{"line":10,"column":72}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":78}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":37}},"7":{"start":{"line":17,"column":0},"end":{"line":17,"column":90}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":81}},"9":{"start":{"line":19,"column":0},"end":{"line":19,"column":84}},"10":{"start":{"line":20,"column":15},"end":{"line":20,"column":21}},"11":{"start":{"line":21,"column":0},"end":{"line":21,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1},"f":{"0":2},"b":{"0":[2,0],"1":[2,2]},"inputSourceMap":{"version":3,"sources":["orders.js"],"names":["router","get","orders","getOrderList","getOrder","patch","editOrder"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAGA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,GAAX,EAAgB,wBAAU,CAAC,OAAD,EAAU,MAAV,CAAV,CAAhB,EAA+CC,gBAAOC,YAAtD;AACAH,MAAM,CAACC,GAAP,CAAW,MAAX,EAAmB,wBAAU,CAAC,OAAD,CAAV,CAAnB,EAAyCC,gBAAOE,QAAhD;AACAJ,MAAM,CAACK,KAAP,CAAa,MAAb,EAAqB,wBAAU,CAAC,OAAD,CAAV,CAArB,EAA2CH,gBAAOI,SAAlD;eAEeN,M","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\","sourcesContent":["import { Router } from \"express\";\r\nimport orders from \"../Controller/orders.js\";\r\nimport checkAuth from \"../Middleware/checkAuth.js\";\r\n\r\n\r\nconst router = Router();\r\n\r\nrouter.get('/', checkAuth([\"admin\", \"user\"]),  orders.getOrderList);\r\nrouter.get('/:id', checkAuth([\"admin\"]), orders.getOrder);\r\nrouter.patch('/:id', checkAuth([\"admin\"]), orders.editOrder);\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7009498a2e598229fb4c6418f73dedd6c1f275f4","contentHash":"11af685600ff8c04101678a2a18906d48c2ebc1a87685debd687945ed45e7230"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\orders.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\orders.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":72}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":42}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":15,"column":24},"end":{"line":29,"column":3}},"6":{"start":{"line":16,"column":4},"end":{"line":28,"column":5}},"7":{"start":{"line":17,"column":24},"end":{"line":17,"column":54}},"8":{"start":{"line":19,"column":6},"end":{"line":19,"column":63}},"9":{"start":{"line":21,"column":6},"end":{"line":21,"column":38}},"10":{"start":{"line":23,"column":6},"end":{"line":23,"column":67}},"11":{"start":{"line":25,"column":6},"end":{"line":27,"column":9}},"12":{"start":{"line":30,"column":20},"end":{"line":58,"column":3}},"13":{"start":{"line":31,"column":4},"end":{"line":57,"column":5}},"14":{"start":{"line":32,"column":20},"end":{"line":36,"column":8}},"15":{"start":{"line":38,"column":6},"end":{"line":44,"column":7}},"16":{"start":{"line":39,"column":8},"end":{"line":39,"column":50}},"17":{"start":{"line":41,"column":8},"end":{"line":43,"column":11}},"18":{"start":{"line":46,"column":6},"end":{"line":46,"column":66}},"19":{"start":{"line":48,"column":6},"end":{"line":50,"column":9}},"20":{"start":{"line":52,"column":6},"end":{"line":52,"column":69}},"21":{"start":{"line":54,"column":6},"end":{"line":56,"column":9}},"22":{"start":{"line":59,"column":21},"end":{"line":96,"column":3}},"23":{"start":{"line":60,"column":4},"end":{"line":95,"column":5}},"24":{"start":{"line":61,"column":19},"end":{"line":63,"column":7}},"25":{"start":{"line":64,"column":22},"end":{"line":68,"column":8}},"26":{"start":{"line":70,"column":6},"end":{"line":76,"column":7}},"27":{"start":{"line":71,"column":8},"end":{"line":71,"column":50}},"28":{"start":{"line":73,"column":8},"end":{"line":75,"column":11}},"29":{"start":{"line":78,"column":20},"end":{"line":82,"column":8}},"30":{"start":{"line":84,"column":6},"end":{"line":84,"column":75}},"31":{"start":{"line":86,"column":6},"end":{"line":88,"column":9}},"32":{"start":{"line":90,"column":6},"end":{"line":90,"column":73}},"33":{"start":{"line":92,"column":6},"end":{"line":94,"column":9}},"34":{"start":{"line":99,"column":0},"end":{"line":99,"column":25}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":24},"end":{"line":15,"column":25}},"loc":{"start":{"line":15,"column":44},"end":{"line":29,"column":3}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":30,"column":20},"end":{"line":30,"column":21}},"loc":{"start":{"line":30,"column":40},"end":{"line":58,"column":3}},"line":30},"3":{"name":"(anonymous_3)","decl":{"start":{"line":59,"column":21},"end":{"line":59,"column":22}},"loc":{"start":{"line":59,"column":41},"end":{"line":96,"column":3}},"line":59}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12},"2":{"loc":{"start":{"line":38,"column":6},"end":{"line":44,"column":7}},"type":"if","locations":[{"start":{"line":38,"column":6},"end":{"line":44,"column":7}},{"start":{"line":38,"column":6},"end":{"line":44,"column":7}}],"line":38},"3":{"loc":{"start":{"line":38,"column":10},"end":{"line":38,"column":45}},"type":"binary-expr","locations":[{"start":{"line":38,"column":10},"end":{"line":38,"column":23}},{"start":{"line":38,"column":27},"end":{"line":38,"column":45}}],"line":38},"4":{"loc":{"start":{"line":70,"column":6},"end":{"line":76,"column":7}},"type":"if","locations":[{"start":{"line":70,"column":6},"end":{"line":76,"column":7}},{"start":{"line":70,"column":6},"end":{"line":76,"column":7}}],"line":70},"5":{"loc":{"start":{"line":70,"column":10},"end":{"line":70,"column":49}},"type":"binary-expr","locations":[{"start":{"line":70,"column":10},"end":{"line":70,"column":25}},{"start":{"line":70,"column":29},"end":{"line":70,"column":49}}],"line":70}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":0,"11":0,"12":1,"13":2,"14":2,"15":1,"16":0,"17":0,"18":1,"19":1,"20":1,"21":1,"22":1,"23":2,"24":2,"25":2,"26":1,"27":0,"28":0,"29":1,"30":1,"31":1,"32":1,"33":1,"34":1},"f":{"0":1,"1":1,"2":2,"3":2},"b":{"0":[1,0],"1":[1,1],"2":[0,1],"3":[1,1],"4":[0,1],"5":[1,1]},"inputSourceMap":{"version":3,"sources":["orders.js"],"names":["orders","getOrderList","req","res","orderlist","Order","findAll","logger","info","status","json","error","message","getOrder","order","findOne","where","id","params","undefined","editOrder","data","orderID","update","name"],"mappings":"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","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\","sourcesContent":["import logger from \"../Middleware/logger.js\";\r\nimport {Order} from \"../models/index.js\";\r\n\r\nexport default class orders{\r\n\r\n    static getOrderList = async(req, res)=>{\r\n        try {\r\n            const orderlist = await Order.findAll({});\r\n            logger.info('this is a list of all the orders');\r\n            res.status(200).json(orderlist);\r\n        } \r\n        catch (error) {\r\n            logger.error('failed to get list of orders',error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n\r\n    static getOrder = async(req, res)=>{\r\n        try {\r\n            const order = await Order.findOne({where:{id: req.params.id}})\r\n            if(order == null || order == undefined){\r\n                logger.error('invalid order ID');\r\n                return res.status(500).json({error: 'failed to get order'});\r\n            }\r\n            logger.info('this is an individual order request');\r\n            res.status(200).json({order: order});\r\n        } \r\n        catch (error) {\r\n            logger.error('failed to get individual order',error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n\r\n    static editOrder = async(req, res)=>{\r\n        try {\r\n            const data = {status: true}\r\n            const orderID = await Order.findOne({where:{id: req.params.id}})\r\n            if(orderID == null || orderID == undefined){\r\n                logger.error('invalid order ID');\r\n                return res.status(500).json({error: 'failed to get order'});\r\n            }\r\n            const order = await Order.update(data, {where:{id: req.params.id}})\r\n            logger.info(`${order.name} has been successfully updated!`);\r\n            res.status(200).json({message: `${order.name} has been successfully updated!`});\r\n        } \r\n        catch (error) {\r\n            logger.error('failed to update individual order,',error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1b6fe9facec23f47dcec8c75ec21f001c339de16","contentHash":"5274d96405eb9361dd03c4026a95696bc1f6864d222e35e6fc6e1e5273244c72"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\users.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\users.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":15},"end":{"line":8,"column":33}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":70}},"4":{"start":{"line":12,"column":17},"end":{"line":12,"column":78}},"5":{"start":{"line":14,"column":39},"end":{"line":14,"column":93}},"6":{"start":{"line":16,"column":15},"end":{"line":16,"column":37}},"7":{"start":{"line":17,"column":0},"end":{"line":17,"column":98}},"8":{"start":{"line":18,"column":0},"end":{"line":18,"column":92}},"9":{"start":{"line":19,"column":15},"end":{"line":19,"column":21}},"10":{"start":{"line":20,"column":0},"end":{"line":20,"column":27}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":14,"column":9},"end":{"line":14,"column":31}},"loc":{"start":{"line":14,"column":37},"end":{"line":14,"column":95}},"line":14}},"branchMap":{"0":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":92}},"type":"cond-expr","locations":[{"start":{"line":14,"column":70},"end":{"line":14,"column":73}},{"start":{"line":14,"column":76},"end":{"line":14,"column":92}}],"line":14},"1":{"loc":{"start":{"line":14,"column":46},"end":{"line":14,"column":67}},"type":"binary-expr","locations":[{"start":{"line":14,"column":46},"end":{"line":14,"column":49}},{"start":{"line":14,"column":53},"end":{"line":14,"column":67}}],"line":14}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":2,"6":1,"7":1,"8":1,"9":1,"10":1},"f":{"0":2},"b":{"0":[2,0],"1":[2,2]},"inputSourceMap":{"version":3,"sources":["users.js"],"names":["router","get","users","getOrderHistory","post","addOrder"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAGA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,SAAX,EAAsB,wBAAU,CAAC,OAAD,EAAU,MAAV,CAAV,CAAtB,EAAoDC,eAAMC,eAA1D;AACAH,MAAM,CAACI,IAAP,CAAY,SAAZ,EAAuB,wBAAU,CAAC,OAAD,EAAU,MAAV,CAAV,CAAvB,EAAqDF,eAAMG,QAA3D;eAGeL,M","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\routes\\","sourcesContent":["import { Router } from \"express\";\r\nimport users from \"../Controller/users.js\";\r\nimport checkAuth from \"../Middleware/checkAuth.js\";\r\n\r\n\r\nconst router = Router();\r\n\r\nrouter.get('/orders', checkAuth([\"admin\", \"user\"]), users.getOrderHistory);\r\nrouter.post('/orders', checkAuth([\"admin\", \"user\"]), users.addOrder);\r\n\r\n\r\nexport default router;"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"8d91b56d9b9e09c9d526f76eb2497cfb5b5b1b25","contentHash":"dbdeb4b4c9bc260db75acc5434bd92b89171f166e2d59098bff99c24ca4f2d06"},"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\users.js":{"path":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\users.js","statementMap":{"0":{"start":{"line":3,"column":0},"end":{"line":5,"column":3}},"1":{"start":{"line":6,"column":0},"end":{"line":6,"column":25}},"2":{"start":{"line":8,"column":14},"end":{"line":8,"column":72}},"3":{"start":{"line":10,"column":13},"end":{"line":10,"column":42}},"4":{"start":{"line":12,"column":39},"end":{"line":12,"column":93}},"5":{"start":{"line":15,"column":20},"end":{"line":59,"column":3}},"6":{"start":{"line":16,"column":4},"end":{"line":58,"column":5}},"7":{"start":{"line":19,"column":10},"end":{"line":19,"column":18}},"8":{"start":{"line":20,"column":19},"end":{"line":24,"column":8}},"9":{"start":{"line":26,"column":6},"end":{"line":51,"column":7}},"10":{"start":{"line":27,"column":8},"end":{"line":27,"column":63}},"11":{"start":{"line":29,"column":8},"end":{"line":31,"column":11}},"12":{"start":{"line":33,"column":21},"end":{"line":37,"column":10}},"13":{"start":{"line":38,"column":25},"end":{"line":45,"column":9}},"14":{"start":{"line":46,"column":8},"end":{"line":46,"column":35}},"15":{"start":{"line":48,"column":8},"end":{"line":48,"column":55}},"16":{"start":{"line":50,"column":8},"end":{"line":50,"column":60}},"17":{"start":{"line":53,"column":6},"end":{"line":53,"column":61}},"18":{"start":{"line":55,"column":6},"end":{"line":57,"column":9}},"19":{"start":{"line":60,"column":27},"end":{"line":78,"column":3}},"20":{"start":{"line":61,"column":4},"end":{"line":77,"column":5}},"21":{"start":{"line":62,"column":30},"end":{"line":66,"column":8}},"22":{"start":{"line":68,"column":6},"end":{"line":68,"column":65}},"23":{"start":{"line":70,"column":6},"end":{"line":70,"column":44}},"24":{"start":{"line":72,"column":6},"end":{"line":72,"column":67}},"25":{"start":{"line":74,"column":6},"end":{"line":76,"column":9}},"26":{"start":{"line":81,"column":0},"end":{"line":81,"column":24}}},"fnMap":{"0":{"name":"_interopRequireDefault","decl":{"start":{"line":12,"column":9},"end":{"line":12,"column":31}},"loc":{"start":{"line":12,"column":37},"end":{"line":12,"column":95}},"line":12},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":20},"end":{"line":15,"column":21}},"loc":{"start":{"line":15,"column":40},"end":{"line":59,"column":3}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":60,"column":27},"end":{"line":60,"column":28}},"loc":{"start":{"line":60,"column":47},"end":{"line":78,"column":3}},"line":60}},"branchMap":{"0":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":92}},"type":"cond-expr","locations":[{"start":{"line":12,"column":70},"end":{"line":12,"column":73}},{"start":{"line":12,"column":76},"end":{"line":12,"column":92}}],"line":12},"1":{"loc":{"start":{"line":12,"column":46},"end":{"line":12,"column":67}},"type":"binary-expr","locations":[{"start":{"line":12,"column":46},"end":{"line":12,"column":49}},{"start":{"line":12,"column":53},"end":{"line":12,"column":67}}],"line":12},"2":{"loc":{"start":{"line":26,"column":6},"end":{"line":51,"column":7}},"type":"if","locations":[{"start":{"line":26,"column":6},"end":{"line":51,"column":7}},{"start":{"line":26,"column":6},"end":{"line":51,"column":7}}],"line":26},"3":{"loc":{"start":{"line":26,"column":10},"end":{"line":26,"column":43}},"type":"binary-expr","locations":[{"start":{"line":26,"column":10},"end":{"line":26,"column":22}},{"start":{"line":26,"column":26},"end":{"line":26,"column":43}}],"line":26}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":3,"7":3,"8":3,"9":2,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0,"25":0,"26":1},"f":{"0":1,"1":3,"2":1},"b":{"0":[1,0],"1":[1,1],"2":[1,1],"3":[2,1]},"inputSourceMap":{"version":3,"sources":["users.js"],"names":["users","addOrder","req","res","name","body","food","Food","findOne","where","undefined","logger","error","status","json","user","User","id","userData","newOrder","quantity","unit_Price","price","foodId","createOrder","info","message","getOrderHistory","completedOrders","Order","findAll"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEe,MAAMA,KAAN,CAAW;AAGP,SAARC,QAAQ,GAAG,OAAMC,GAAN,EAAWC,GAAX,KAAkB;AAChC,QAAI;AACA,YAAM;AAACC,QAAAA;AAAD,UAASF,GAAG,CAACG,IAAnB;AACA,YAAMC,IAAI,GAAG,MAAMC,YAAKC,OAAL,CAAa;AAACC,QAAAA,KAAK,EAAC;AAACL,UAAAA,IAAI,EAAEA;AAAP;AAAP,OAAb,CAAnB;;AACA,UAAGE,IAAI,IAAI,IAAR,IAAgBA,IAAI,IAAII,SAA3B,EAAqC;AACjCC,wBAAOC,KAAP,CAAa,+BAAb;;AACA,eAAOT,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACF,UAAAA,KAAK,EAAC;AAAP,SAArB,CAAP;AACH,OAHD,MAII;AAEA,cAAMG,IAAI,GAAG,MAAMC,YAAKR,OAAL,CAAa;AAACC,UAAAA,KAAK,EAAC;AAACQ,YAAAA,EAAE,EAAEf,GAAG,CAACgB,QAAJ,CAAaD;AAAlB;AAAP,SAAb,CAAnB;AACA,cAAME,QAAQ,GAAG;AACbf,UAAAA,IAAI,EAAEE,IAAI,CAACF,IADE;AAEbgB,UAAAA,QAAQ,EAAE,CAFG;AAGbC,UAAAA,UAAU,EAAEf,IAAI,CAACgB,KAHJ;AAIbA,UAAAA,KAAK,EAAEhB,IAAI,CAACgB,KAAL,GAAY,CAJN;AAKbT,UAAAA,MAAM,EAAE,KALK;AAMbU,UAAAA,MAAM,EAAEjB,IAAI,CAACW;AANA,SAAjB;AAQAF,QAAAA,IAAI,CAACS,WAAL,CAAiBL,QAAjB;;AACAR,wBAAOc,IAAP,CAAY,wBAAZ;;AACAtB,QAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,6BAArB;AACH;AACJ,KAtBD,CAuBA,OAAOF,KAAP,EAAc;AACVD,sBAAOC,KAAP,CAAa,wBAAb,EAAsCA,KAAtC;;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACF,QAAAA,KAAK,EAAEA,KAAK,CAACc;AAAd,OAArB;AACH;AACJ,GA5Bc;AA8BO,SAAfC,eAAe,GAAG,OAAMzB,GAAN,EAAWC,GAAX,KAAkB;AACvC,QAAI;AACA,YAAMyB,eAAe,GAAG,MAAMC,aAAMC,OAAN,CAAc;AAACrB,QAAAA,KAAK,EAAC;AAACI,UAAAA,MAAM,EAAE;AAAT;AAAP,OAAd,CAA9B;;AACAF,sBAAOc,IAAP,CAAY,oCAAZ;;AACAtB,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBc,eAArB;AACH,KAJD,CAKA,OAAOhB,KAAP,EAAc;AACVD,sBAAOC,KAAP,CAAa,8BAAb,EAA4CA,KAA5C;;AACAT,MAAAA,GAAG,CAACU,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAACF,QAAAA,KAAK,EAAEA,KAAK,CAACc;AAAd,OAArB;AACH;AACJ,GAVqB;AAjCA","sourceRoot":"D:\\projects\\web projects\\fastfood_project\\fastfood_backend\\Controller\\","sourcesContent":["import logger from \"../Middleware/logger.js\";\r\nimport {Order, Food, User} from \"../models/index.js\";\r\n\r\nexport default class users{\r\n\r\n\r\n    static addOrder = async(req, res) =>{\r\n        try {\r\n            const {name} = req.body;\r\n            const food = await Food.findOne({where:{name: name}});\r\n            if(food == null || food == undefined){\r\n                logger.error('food doesnt exist in database');\r\n                return res.status(500).json({error:'this food is not servered here'});\r\n            }\r\n            else{\r\n                \r\n                const user = await User.findOne({where:{id: req.userData.id}});\r\n                const newOrder = {\r\n                    name: food.name,\r\n                    quantity: 2,\r\n                    unit_Price: food.price,\r\n                    price: food.price* 2,\r\n                    status: false,\r\n                    foodId: food.id\r\n                }\r\n                user.createOrder(newOrder);\r\n                logger.info('new order made by user');\r\n                res.status(201).json(\"order created successfully!\");\r\n            }\r\n        } \r\n        catch (error) {\r\n            logger.error('failed to create order',error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n\r\n    static getOrderHistory = async(req, res) =>{\r\n        try {\r\n            const completedOrders = await Order.findAll({where:{status: true}});\r\n            logger.info('this your list of completed orders');\r\n            res.status(200).json(completedOrders);\r\n        } \r\n        catch (error) {\r\n            logger.error('failed to find order history',error);\r\n            res.status(500).json({error: error.message});\r\n        }\r\n    }\r\n\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f858108d9fadc05cede1b9951c8f5a8e354bc9fe","contentHash":"bf504e1b7c4bf1ad797095517a3c9c111168edcccce3118c75c1c1d22c5957ee"}}